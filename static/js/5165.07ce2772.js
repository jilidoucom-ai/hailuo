"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[5165],{8470(e,t,n){n.r(t),n.d(t,{default:()=>x});var a=n(20908),l=n(30388),o=(n(59089),n(76031),n(20641)),i=n(53751),r=n(50953),s=n(90033),c=n(14860),u=n(2636),d=n(12321),p=n(33366),f={class:"modal-header"},v={class:"modal-body"},g={key:0,class:"message-loading"},m={key:1},h={class:"expires"},k={class:"command"},C={class:"info"},L={class:"icon"},w={class:"send"},b=["href"],_={class:"modal-footer"};const y={__name:"TelegramModal",props:{config:{telegram_bot_name:""}},setup:function(e,t){var n=t.expose,y=e,x=(0,p.d)().showToast,A=(0,r.KR)(!1),I=(0,r.KR)(""),F=(0,r.KR)(!1),S=(0,r.KR)(0),T=null,B=null,E=function(){T=setInterval(function(){S.value--},1e3)},M=function(){B=setInterval((0,l.A)((0,a.A)().m(function e(){var t,n,l,o,i,r;return(0,a.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,u.checkTelegram)({code:I.value});case 1:t=e.v,n=t.status,l=t.data,"success"===n&&(clearInterval(B),o=l.auth_data,i=l.is_admin,r=l.token,localStorage.setItem("token",r),localStorage.setItem("is_admin",i),localStorage.setItem("auth_data",o),setTimeout(function(){localStorage.setItem("oauth_login_success",Date.now()),A.value=!1,window.location.reload()},500)),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])})),1e3)},R=function(){var e=(0,l.A)((0,a.A)().m(function e(){var t,n,l,o;return(0,a.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return clearInterval(T),clearTimeout(B),F.value=!0,e.p=1,e.n=2,(0,u.getTelegramCode)();case 2:t=e.v,n=t.data,l=n.hash,o=n.expires_in,I.value=l,S.value=o,E(),M(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,F.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),D=function(){navigator.clipboard.writeText("/login ".concat(I.value)).then(function(){x("\u590d\u5236\u6210\u529f","success",3e3)}).catch(function(){x("\u590d\u5236\u5931\u8d25","error",3e3)})},X=function(){clearInterval(T),clearTimeout(B),A.value=!1};return(0,o.wB)(function(){return A.value},function(e){e||(clearInterval(T),clearTimeout(B))},{immediate:!0,deep:!0}),n({openModal:function(){R(),A.value=!0}}),function(e,t){return(0,o.uX)(),(0,o.Wv)(o.Im,{to:"body"},[A.value?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:X},[(0,o.Lk)("div",{class:"modal-content",onClick:t[0]||(t[0]=(0,i.withModifiers)(function(){},["stop"]))},[(0,o.Lk)("div",f,[t[1]||(t[1]=(0,o.Lk)("h3",null,"Telegram \u767b\u5f55",-1)),(0,o.Lk)("button",{class:"close-btn",onClick:X},[(0,o.bF)((0,r.R1)(c.MRt),{size:20})])]),(0,o.Lk)("div",v,[F.value?((0,o.uX)(),(0,o.CE)("div",g,[(0,o.bF)(d.A),(0,o.Lk)("p",null,(0,s.toDisplayString)(e.$t("common.loading")),1)])):((0,o.uX)(),(0,o.CE)("ol",m,[(0,o.Lk)("li",null,[(0,o.Lk)("div",null,[t[2]||(t[2]=(0,o.eW)(" 1.\u590d\u5236\u547d\u4ee4 ",-1)),(0,o.Lk)("span",h,(0,s.toDisplayString)(S.value)+"s ",1),t[3]||(t[3]=(0,o.eW)(" \u540e\u8fc7\u671f ",-1)),t[4]||(t[4]=(0,o.Lk)("br",null,null,-1))]),(0,o.Lk)("div",k,[(0,o.Lk)("div",C," /login "+(0,s.toDisplayString)(I.value),1),(0,o.Lk)("div",L,[(0,o.bF)((0,r.R1)(c.bzS),{size:24,onClick:D})])])]),(0,o.Lk)("li",w,[t[5]||(t[5]=(0,o.eW)(" 2.\u53d1\u9001\u7ed9 ",-1)),(0,o.Lk)("a",{href:"https://t.me/".concat(y.config.telegram_bot_name),target:"_blank"}," @"+(0,s.toDisplayString)(y.config.telegram_bot_name),9,b)])]))]),(0,o.Lk)("div",_,[(0,o.Lk)("button",{class:"cancel-btn",onClick:X},(0,s.toDisplayString)(e.$t("common.cancel")),1),(0,o.Lk)("button",{class:"submit-btn",onClick:X},(0,s.toDisplayString)(e.$t("common.submit")),1)])])])):(0,o.Q3)("",!0)])}}};const x=(0,n(66262).A)(y,[["__scopeId","data-v-736f0af8"]])},12321(e,t,n){n.d(t,{A:()=>r});var a=n(20641),l=n(90033),o={key:0,class:"spinner-text"};const i={name:"LoadingSpinner",props:{text:{type:String,default:""},overlay:{type:Boolean,default:!1}}};const r=(0,n(66262).A)(i,[["render",function(e,t,n,i,r,s){return(0,a.uX)(),(0,a.CE)("div",{class:(0,l.normalizeClass)(["loading-spinner",{"loading-spinner-overlay":n.overlay}])},[t[0]||(t[0]=(0,a.Lk)("div",{class:"spinner"},[(0,a.Lk)("div",{class:"spinner-circle"})],-1)),n.text?((0,a.uX)(),(0,a.CE)("div",o,(0,l.toDisplayString)(n.text),1)):(0,a.Q3)("",!0)],2)}],["__scopeId","data-v-4d20d688"]])},65165(e,t,n){n.r(t),n.d(t,{default:()=>L});var a=n(20908),l=n(30388),o=(n(16280),n(76918),n(20641)),i=n(59258),r={width:"40",height:"40px",viewBox:"-0.5 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};const s={name:"IconGoogle"};var c=n(66262);const u=(0,c.A)(s,[["render",function(e,t,n,a,l,s){return(0,o.uX)(),(0,o.CE)("svg",r,(0,i.A)(t[0]||(t[0]=[(0,o.Fv)('<title>Google-color</title><desc>Created with Sketch.</desc><defs></defs><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Color-" transform="translate(-401.000000, -860.000000)"><g id="Google" transform="translate(401.000000, 860.000000)"><path d="M9.82727273,24 C9.82727273,22.4757333 10.0804318,21.0144 10.5322727,19.6437333 L2.62345455,13.6042667 C1.08206818,16.7338667 0.213636364,20.2602667 0.213636364,24 C0.213636364,27.7365333 1.081,31.2608 2.62025,34.3882667 L10.5247955,28.3370667 C10.0772273,26.9728 9.82727273,25.5168 9.82727273,24" id="Fill-1" fill="#FBBC05"></path><path d="M23.7136364,10.1333333 C27.025,10.1333333 30.0159091,11.3066667 32.3659091,13.2266667 L39.2022727,6.4 C35.0363636,2.77333333 29.6954545,0.533333333 23.7136364,0.533333333 C14.4268636,0.533333333 6.44540909,5.84426667 2.62345455,13.6042667 L10.5322727,19.6437333 C12.3545909,14.112 17.5491591,10.1333333 23.7136364,10.1333333" id="Fill-2" fill="#EB4335"></path><path d="M23.7136364,37.8666667 C17.5491591,37.8666667 12.3545909,33.888 10.5322727,28.3562667 L2.62345455,34.3946667 C6.44540909,42.1557333 14.4268636,47.4666667 23.7136364,47.4666667 C29.4455,47.4666667 34.9177955,45.4314667 39.0249545,41.6181333 L31.5177727,35.8144 C29.3995682,37.1488 26.7323182,37.8666667 23.7136364,37.8666667" id="Fill-3" fill="#34A853"></path><path d="M46.1454545,24 C46.1454545,22.6133333 45.9318182,21.12 45.6113636,19.7333333 L23.7136364,19.7333333 L23.7136364,28.8 L36.3181818,28.8 C35.6879545,31.8912 33.9724545,34.2677333 31.5177727,35.8144 L39.0249545,41.6181333 C43.3393409,37.6138667 46.1454545,31.6490667 46.1454545,24" id="Fill-4" fill="#4285F4"></path></g></g></g>',4)])))}]]);var d={width:"44px",height:"44px",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};const p={name:"IconTelegram"},f=(0,c.A)(p,[["render",function(e,t,n,a,l,r){return(0,o.uX)(),(0,o.CE)("svg",d,(0,i.A)(t[0]||(t[0]=[(0,o.Fv)('<circle cx="16" cy="16" r="14" fill="url(#paint0_linear_87_7225)"></circle><path d="M22.9866 10.2088C23.1112 9.40332 22.3454 8.76755 21.6292 9.082L7.36482 15.3448C6.85123 15.5703 6.8888 16.3483 7.42147 16.5179L10.3631 17.4547C10.9246 17.6335 11.5325 17.541 12.0228 17.2023L18.655 12.6203C18.855 12.4821 19.073 12.7665 18.9021 12.9426L14.1281 17.8646C13.665 18.3421 13.7569 19.1512 14.314 19.5005L19.659 22.8523C20.2585 23.2282 21.0297 22.8506 21.1418 22.1261L22.9866 10.2088Z" fill="white"></path><defs><linearGradient id="paint0_linear_87_7225" x1="16" y1="2" x2="16" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#37BBFE"></stop><stop offset="1" stop-color="#007DBB"></stop></linearGradient></defs>',3)])))}]]);var v=n(71029),g=n(2636),m=n(8470),h=n(50953),k={class:"third-party-login"};const C={__name:"ThirdPartyLogin",props:{config:{telegram_bot_name:""}},setup:function(e){var t=e,n=(0,v.lq)(),i=(0,h.KR)(null),r=function(e){window.open(e,"oauth","width=600,height=700")},s=function(){var e=(0,l.A)((0,a.A)().m(function e(t){var l,o,s,c,u;return(0,a.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("google"!=t){e.n=6;break}return e.p=1,l=n.query.code,o={type:t,code:l||"",redirect:"".concat(window.location.origin,"/verify.html")},e.n=2,(0,g.oauth)(o);case 2:if(s=e.v,c=s.data&&s.data.url||("string"==typeof s.data?s.data:null)){e.n=3;break}throw new Error("\u540e\u7aef\u672a\u8fd4\u56de\u6388\u6743 URL");case 3:r(c),e.n=5;break;case 4:e.p=4,e.v;case 5:e.n=7;break;case 6:"telegram"==t&&(null===(u=i.value)||void 0===u||u.openModal());case 7:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}();return function(e,n){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",k,[(0,o.Lk)("button",{type:"submit",class:"btn",onClick:n[0]||(n[0]=function(e){return s("google")})},[(0,o.bF)(u,{class:"icon-social"})]),(0,o.Lk)("button",{type:"submit",class:"btn",onClick:n[1]||(n[1]=function(e){return s("telegram")})},[(0,o.bF)(f,{class:"icon-social"})])]),(0,o.bF)(m.default,{ref_key:"telegramModalRef",ref:i,config:t.config},null,8,["config"])],64)}}},L=(0,c.A)(C,[["__scopeId","data-v-60d608df"]])}}]);