"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[3076],{43076(e,a,t){t.r(a),t.d(a,{default:()=>le});var l=t(59258),s=t(20908),n=t(30388),r=(t(44114),t(9868),t(78459),t(27495),t(25440),t(20641)),i=t(90033),o=t(50953),c=t(53751),u=t(46992),d=t(33366),p=t(14860),v=t(92549),k=t(19043);function m(){return(0,k.A)({url:"/user/comm/config",method:"get"})}function b(e){return(0,k.A)({url:"/user/order/save",method:"post",data:{period:"deposit",deposit_amount:e,plan_id:0}})}var f=t(80394),y=t(71029),L={class:"deposit-container"},g={class:"deposit-inner"},h={class:"dashboard-card welcome-card"},w={class:"card-header"},A={class:"card-title"},C={class:"card-body"},E={class:"dashboard-card balance-card"},D={class:"card-header"},S={class:"card-title"},_={class:"card-body"},X={key:0,class:"balance-display"},F={class:"balance-value"},$={class:"balance-label"},K={key:1,class:"balance-skeleton"},R={class:"dashboard-card deposit-card"},I={class:"card-header"},W={class:"card-title"},T={class:"card-body"},z={class:"deposit-notice"},N={class:"amount-selection"},G={class:"period-cards"},q=["onClick"],M={class:"period-card-inner"},O={class:"period-price"},V={class:"currency"},x={class:"amount"},B={class:"custom-amount"},P={for:"customAmount"},Q={key:0,class:"input-container skeleton-input"},U={key:1,class:"input-container"},j={class:"currency-symbol"},H=["placeholder"],J={key:2,class:"error-message"},Y={class:"deposit-actions"},Z={key:0,class:"btn-order-skeleton"},ee=["disabled"],ae={key:1,class:"loader"};const te={__name:"WalletDeposit",setup:function(e){var a=(0,u.s9)().t,t=(0,d.d)().showToast,k=(0,y.rd)();(0,f.isXiaoV2board)()||k.push("/dashboard");var te=(0,o.KR)(0),le=(0,o.KR)("$"),se=(0,o.KR)(f.WALLET_CONFIG.presetAmounts||[6,30,68,128,256,328,648,1280]),ne=(0,o.KR)(f.WALLET_CONFIG.defaultSelectedAmount||null),re=(0,o.KR)(""),ie=(0,o.KR)(""),oe=f.WALLET_CONFIG.minimumDepositAmount||1,ce=(0,o.Kh)({balance:!0,submitting:!1,config:!0}),ue=function(){var e=(0,n.A)((0,s.A)().m(function e(){var a;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m();case 1:(a=e.v)&&a.data&&a.data.currency_symbol&&(le.value=a.data.currency_symbol),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,ce.config=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),de=function(){if(ne.value=null,""!==re.value){var e=parseFloat(re.value);isNaN(e)||e<=0?ie.value=a("wallet.deposit.amountError.invalid"):ie.value=e<oe?a("wallet.deposit.amountError.minimum").replace("1",oe):""}else ie.value=""},pe=(0,r.EW)(function(){return ne.value?ne.value:re.value&&parseFloat(re.value)>=1?parseFloat(re.value):null}),ve=(0,r.EW)(function(){return null!==pe.value}),ke=function(){var e=(0,n.A)((0,s.A)().m(function e(){var l,n,r;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return ce.balance=!0,e.p=1,e.n=2,(0,v.ug)();case 2:(l=e.v)&&l.data&&(te.value=l.data.balance||0),e.n=4;break;case 3:e.p=3,r=e.v,t((null===(n=r.response)||void 0===n?void 0:n.message)||r.message||a("errors.serverError")||a("common.error_occurred"),"error");case 4:return e.p=4,ce.balance=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),me=function(){var e=(0,n.A)((0,s.A)().m(function e(){var l,n,r,i,o;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(ve.value){e.n=1;break}return t(a("validation.required").replace("{field}",a("wallet.deposit.title"))||a("wallet.deposit.amountError.required"),"warning"),e.a(2);case 1:return e.p=1,ce.submitting=!0,l=Math.round(100*pe.value),e.n=2,b(l);case 2:(n=e.v)&&n.data&&(r=n.data,t(a("wallet.deposit.success"),"success"),k.push({path:"/payment",query:{trade_no:r,type:"deposit"}})),e.n=4;break;case 3:e.p=3,o=e.v,t((null===(i=o.response)||void 0===i?void 0:i.message)||o.message||a("errors.serverError")||a("wallet.deposit.failed"),"error");case 4:return e.p=4,ce.submitting=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();return(0,r.sV)(function(){ke(),ue()}),function(e,a){return(0,r.uX)(),(0,r.CE)("div",L,[(0,r.Lk)("div",g,[(0,r.Lk)("div",h,[(0,r.Lk)("div",w,[(0,r.Lk)("h2",A,(0,i.toDisplayString)(e.$t("wallet.welcome.title")||"\u8d26\u6237\u5145\u503c"),1)]),(0,r.Lk)("div",C,[(0,r.Lk)("p",null,(0,i.toDisplayString)(e.$t("wallet.welcome.description")||"\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u4e3a\u60a8\u7684\u8d26\u6237\u5145\u503c\uff0c\u9009\u62e9\u9884\u8bbe\u91d1\u989d\u6216\u8f93\u5165\u81ea\u5b9a\u4e49\u91d1\u989d\u8fdb\u884c\u5145\u503c\u3002\u5145\u503c\u540e\u7684\u4f59\u989d\u5c06\u7acb\u5373\u5230\u8d26\u5e76\u53ef\u7528\u4e8e\u8d2d\u4e70\u6211\u4eec\u7684\u670d\u52a1\u3002"),1)])]),(0,r.Lk)("div",E,[(0,r.Lk)("div",D,[(0,r.Lk)("h2",S,(0,i.toDisplayString)(e.$t("wallet.balance.title")),1)]),(0,r.Lk)("div",_,[ce.balance?((0,r.uX)(),(0,r.CE)("div",K,(0,l.A)(a[1]||(a[1]=[(0,r.Lk)("div",{class:"skeleton-balance-value"},null,-1),(0,r.Lk)("div",{class:"skeleton-balance-label"},null,-1)])))):((0,r.uX)(),(0,r.CE)("div",X,[(0,r.Lk)("div",F,(0,i.toDisplayString)(le.value)+(0,i.toDisplayString)((t=te.value,(parseFloat(t)/100).toFixed(2))),1),(0,r.Lk)("div",$,(0,i.toDisplayString)(e.$t("wallet.balance.description")),1)]))])]),(0,r.Lk)("div",R,[(0,r.Lk)("div",I,[(0,r.Lk)("h2",W,(0,i.toDisplayString)(e.$t("wallet.deposit.title")),1)]),(0,r.Lk)("div",T,[(0,r.Lk)("div",z,[(0,r.bF)((0,o.R1)(p.GBC),{size:20,class:"notice-icon"}),(0,r.Lk)("span",null,(0,i.toDisplayString)(e.$t("wallet.deposit.notice")),1)]),(0,r.Lk)("div",N,[(0,r.Lk)("div",G,[ce.config?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},(0,r.pI)(4,function(e){return(0,r.Lk)("div",{key:"skeleton-".concat(e),class:"period-card skeleton-card"},(0,l.A)(a[2]||(a[2]=[(0,r.Lk)("div",{class:"period-card-inner"},[(0,r.Lk)("div",{class:"skeleton-price"})],-1)])))}),64)):((0,r.uX)(!0),(0,r.CE)(r.FK,{key:1},(0,r.pI)(se.value,function(e,a){return(0,r.uX)(),(0,r.CE)("div",{key:a,class:(0,i.normalizeClass)(["period-card",{active:ne.value===e}]),onClick:function(a){return function(e){ne.value=e,re.value="",ie.value=""}(e)}},[(0,r.Lk)("div",M,[(0,r.Lk)("div",O,[(0,r.Lk)("span",V,(0,i.toDisplayString)(le.value),1),(0,r.Lk)("span",x,(0,i.toDisplayString)(e),1)])])],10,q)}),128))])]),(0,r.Lk)("div",B,[(0,r.Lk)("label",P,(0,i.toDisplayString)(e.$t("wallet.deposit.customAmount")),1),ce.config?((0,r.uX)(),(0,r.CE)("div",Q,(0,l.A)(a[3]||(a[3]=[(0,r.Lk)("div",{class:"skeleton-input-field"},null,-1)])))):((0,r.uX)(),(0,r.CE)("div",U,[(0,r.Lk)("span",j,(0,i.toDisplayString)(le.value),1),(0,r.bo)((0,r.Lk)("input",{id:"customAmount","onUpdate:modelValue":a[0]||(a[0]=function(e){return re.value=e}),type:"number",min:"1",placeholder:e.$t("wallet.deposit.customAmountPlaceholder"),onInput:de},null,40,H),[[c.vModelText,re.value]])])),ie.value?((0,r.uX)(),(0,r.CE)("small",J,(0,i.toDisplayString)(ie.value),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Y,[ce.config?((0,r.uX)(),(0,r.CE)("div",Z)):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"btn-order",disabled:ce.submitting||!ve.value||parseFloat(re.value)<(0,o.R1)(oe),onClick:me},[ce.submitting?((0,r.uX)(),(0,r.CE)("span",ae)):((0,r.uX)(),(0,r.Wv)((0,o.R1)(p.AMT),{key:0,size:18})),(0,r.Lk)("span",null,(0,i.toDisplayString)(e.$t("wallet.deposit.button")),1)],8,ee))])])])])]);var t}}};const le=(0,t(66262).A)(te,[["__scopeId","data-v-0e17c8b4"]])}}]);