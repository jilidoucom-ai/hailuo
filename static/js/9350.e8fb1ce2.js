"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[9350],{89350(e,t,a){a.r(t),a.d(t,{default:()=>Wt});var n=a(59258),o=(a(62010),a(20641)),l=a(90033),i=a(53751),r={class:"payment-container"},s={class:"payment-inner"},c={class:"dashboard-card title-card"},u={class:"card-header"},d={class:"card-title"},p={class:"card-body"},y={class:"content-wrapper"},m={class:"left-column"},v={class:"section-wrapper"},f={class:"section-title"},k={key:0,class:"product-info"},h={key:0},g={class:"info-row"},_={class:"info-label"},C={class:"info-value"},L={key:1},D={class:"info-row"},b={class:"info-label"},w={class:"info-value"},S={class:"info-row"},E={class:"info-label"},A={class:"info-value"},X={class:"info-row"},I={class:"info-label"},P={class:"info-value"},M={key:1,class:"skeleton-card"},$={class:"section-wrapper"},T={class:"section-title"},F={key:0,class:"order-info"},N={class:"info-row"},z={class:"info-label"},Q={class:"info-value"},O={class:"info-row"},W={class:"info-label"},x={class:"info-value"},R={key:0,class:"info-row"},G={class:"info-label"},K={class:"info-value amount"},Y={key:1,class:"info-row"},B={class:"info-label"},q={class:"info-value amount"},H={key:2,class:"info-row discount-row"},V={class:"info-label"},J={class:"info-value discount"},U={key:3,class:"info-row"},j={class:"info-label"},Z={class:"info-value discount"},ee={key:4,class:"info-row"},te={class:"info-label"},ae={class:"info-value"},ne={key:5,class:"info-row"},oe={class:"info-label"},le={class:"info-value fee"},ie={class:"info-row final-row"},re={class:"info-label"},se={class:"info-value final"},ce={key:1,class:"skeleton-card"},ue={class:"right-column"},de={class:"section-wrapper order-status"},pe={class:"section-title"},ye={key:0,class:"status-info"},me={class:"status-icon"},ve={class:"status-text"},fe={key:0,class:"activate-status"},ke={key:1},he={key:2},ge={key:3},_e={key:4},Ce={key:5},Le={key:6},De={key:7},be={key:1,class:"skeleton-card"},we={key:0,class:"section-wrapper free-order"},Se={class:"section-title"},Ee={class:"free-notice"},Ae={class:"notice-text"},Xe={key:1,class:"section-wrapper"},Ie={class:"section-title"},Pe={key:0,class:"payment-methods"},Me=["onClick"],$e={class:"method-icon"},Te=["src","alt"],Fe={class:"method-details"},Ne={class:"method-name"},ze={key:0,class:"method-fee"},Qe={class:"method-check"},Oe={key:1,class:"skeleton-card"},We={class:"action-buttons"},xe={key:0,class:"btn-group pay-row"},Re={key:1,class:"btn-group pay-row"},Ge={key:0},Ke={key:1},Ye={key:0,class:"btn-group pay-row"},Be=["disabled"],qe={key:1,class:"loader"},He={key:1,class:"btn-group action-row"},Ve=["disabled"],Je={key:1,class:"loader"},Ue=["disabled"],je={key:1,class:"loader"},Ze={key:2,class:"btn-group action-row"},et=["disabled"],tt={key:1,class:"loader"},at=["disabled"],nt={key:1,class:"loader"},ot={key:0,class:"payment-success-overlay"},lt={class:"success-animation"},it={class:"check-container"},rt={class:"check-background"},st={key:0,class:"confetti-container"},ct={key:0,class:"cancel-modal"},ut={class:"cancel-modal-container"},dt={class:"cancel-modal-content"},pt={class:"cancel-modal-icon"},yt={class:"cancel-modal-header"},mt={class:"cancel-modal-actions"},vt={key:0,class:"modal-wrapper"},ft={class:"modal-container"},kt={class:"modal-card"},ht={class:"modal-header"},gt={class:"icon-wrapper payment"},_t={key:0},Ct={key:1},Lt={key:2,class:"qrcode-container"},Dt={key:3,class:"payment-link"},bt={key:0},wt={key:1},St={class:"modal-footer"};var Et=a(20908),At=a(30388),Xt=(a(28706),a(50113),a(74423),a(44114),a(23288),a(18111),a(20116),a(9868),a(26099),a(27495),a(21699),a(47764),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(50953)),It=a(46992),Pt=a(33366),Mt=a(71029),$t=a(43258),Tt=a(80394),Ft=a(67944),Nt=a(25910),zt=a(14860);const Qt={name:"PaymentView",components:{IconCheck:zt.iWP,IconX:zt.MRt,IconCreditCard:zt.Bln,IconCircle:zt.ABt,IconCircleCheck:zt.iQ6,IconAlertCircle:zt.GBC,IconArrowRight:zt.hIg,IconAlertTriangle:zt.QO,IconRefresh:zt.H42,IconExternalLink:zt.HW5,IconArrowLeft:zt.Gk,QrcodeVue:Ft.Ay,ConfettiExplosion:Nt.A,IconClock:zt._Ll,IconLoader2:zt.fQ5,IconHelp:zt.Lwz},setup:function(){var e=(0,It.s9)().t,t=(0,Pt.d)().showToast,a=(0,Mt.lq)(),n=(0,Mt.rd)(),l=(0,Xt.KR)(!1),i=(0,Xt.Kh)({order:!0,methods:!0,checking:!1,cancelling:!1,paying:!1}),r=(0,Xt.KR)({}),s=(0,Xt.KR)([]),c=(0,Xt.KR)(null),u=(0,Xt.KR)(null),d=(0,Xt.KR)(!1),p=(0,Xt.KR)(!1),y=(0,Xt.KR)(!1),m=(0,Xt.KR)(!1),v=(0,Xt.KR)(!1),f=(0,Xt.KR)(null),k=(0,Xt.KR)(null),h=(0,o.EW)(function(){if(!c.value||!r.value.total_amount)return 0;var e=s.value.find(function(e){return e.id===c.value});if(!e)return 0;var t=0;return e.handling_fee_percent&&(t+=r.value.total_amount*e.handling_fee_percent/100),e.handling_fee_fixed&&(t+=e.handling_fee_fixed),Math.round(t)}),g=(0,o.EW)(function(){return r.value.total_amount?r.value.total_amount+h.value:0}),_=function(){var o=(0,At.A)((0,Et.A)().m(function o(){var l,s,c;return(0,Et.A)().w(function(o){for(;;)switch(o.p=o.n){case 0:if(i.order=!0,o.p=1,l=null,(s=new URLSearchParams(window.location.search||window.location.hash.split("?")[1]||"")).has("trade_no")&&(l=s.get("trade_no")),!l&&s.has("out_trade_no")&&(l=s.get("out_trade_no")),l||(l=a.query.trade_no||a.query.out_trade_no),l){o.n=2;break}return t(e("payment.no_order_selected"),"error"),n.push("/shop"),o.a(2);case 2:return o.n=3,(0,$t.KU)(l);case 3:(c=o.v).data?(r.value=c.data,0===r.value.status&&0===r.value.total_amount&&D()):(t(e("payment.order_not_found"),"error"),n.push("/shop")),o.n=5;break;case 4:o.p=4,o.v,t(e("payment.failed_to_fetch_order"),"error"),n.push("/shop");case 5:return o.p=5,i.order=!1,o.f(5);case 6:return o.a(2)}},o,null,[[1,4,5,6]])}));return function(){return o.apply(this,arguments)}}(),C=function(){var a=(0,At.A)((0,Et.A)().m(function a(){var n;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return i.methods=!0,a.p=1,a.n=2,(0,$t.J5)();case 2:(n=a.v).data&&(s.value=n.data,(1===s.value.length||Tt.PAYMENT_CONFIG.autoSelectFirstMethod)&&s.value.length>0&&(c.value=s.value[0].id)),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.failed_to_fetch_methods"),"error");case 4:return a.p=4,i.methods=!1,a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}));return function(){return a.apply(this,arguments)}}(),L=function(){var a=(0,At.A)((0,Et.A)().m(function a(){return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(!(r.value.total_amount>0)||c.value){a.n=1;break}return t(e("payment.select_method_first"),"warning"),a.a(2);case 1:return i.checking=!0,a.p=2,0===r.value.total_amount&&s.value&&s.value.length>0&&(c.value=s.value[0].id),a.n=3,(0,$t.hh)(r.value.trade_no,c.value);case 3:t(e("payment.payment_processing"),"info"),D(),a.n=5;break;case 4:a.p=4,a.v,t(e("payment.check_failed"),"error"),i.checking=!1;case 5:return a.a(2)}},a,null,[[2,4]])}));return function(){return a.apply(this,arguments)}}(),D=function(){var a=(0,At.A)((0,Et.A)().m(function a(){var n,o;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(a.p=0,!d.value){a.n=1;break}return a.a(2);case 1:return a.n=2,b();case 2:0!==r.value.total_amount||d.value?r.value.total_amount>0&&!d.value&&(u.value&&clearInterval(u.value),Tt.PAYMENT_CONFIG.autoCheckPayment?(n=0,u.value=setInterval(function(){n++,b(),Tt.PAYMENT_CONFIG.autoCheckMaxTimes>0&&n>=Tt.PAYMENT_CONFIG.autoCheckMaxTimes&&(clearInterval(u.value),i.checking=!1,d.value||t(e("payment.check_timeout"),"info"))},Tt.PAYMENT_CONFIG.autoCheckInterval)):(o=0,u.value=setInterval(function(){o++,b(),o>=2&&(clearInterval(u.value),i.checking=!1,d.value||t(e("payment.check_timeout"),"info"))},5e3))):setTimeout((0,At.A)((0,Et.A)().m(function e(){return(0,Et.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,b(true);case 1:return e.a(2)}},e)})),1e3),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.check_failed"),"error"),i.checking=!1;case 4:return a.a(2)}},a,null,[[0,3]])}));return function(){return a.apply(this,arguments)}}(),b=function(){var a=(0,At.A)((0,Et.A)().m(function a(){var n,o,l=arguments;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return n=l.length>0&&void 0!==l[0]&&l[0],a.p=1,a.n=2,(0,$t.Jf)(r.value.trade_no);case 2:1===(o=a.v).data?(r.value.status=o.data,setTimeout(function(){var e=document.querySelector(".order-status-notice");e&&e.classList.add("status-transition"),r.value.status=3,w(!n)},1e3)):0!==o.data&&2!==o.data?(r.value.status=o.data,w(!n)):2===o.data&&(u.value&&(clearInterval(u.value),u.value=null),n||t(e("payment.order_cancelled"),"warning"),i.checking=!1,i.paying=!1,r.value.status=o.data,S()),0===r.value.total_amount&&(i.checking=!1,i.paying=!1),a.n=4;break;case 3:a.p=3,a.v,0===r.value.total_amount&&(i.checking=!1,i.paying=!1);case 4:return a.a(2)}},a,null,[[1,3]])}));return function(){return a.apply(this,arguments)}}(),w=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];d.value||(u.value&&(clearInterval(u.value),u.value=null),d.value=!0,i.checking=!1,i.paying=!1,S(),l.value||(p.value=!0,(0,o.dY)(function(){setTimeout(function(){y.value=!0},300),a&&t(e("payment.pay_success"),"success"),setTimeout(function(){y.value=!1,setTimeout(function(){p.value=!1},500)},4500)})))},S=function(){v.value=!1,f.value=null,k.value=null},E=function(){var a=(0,At.A)((0,Et.A)().m(function a(){var n,o,l;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(c.value){a.n=1;break}return t(e("payment.select_method_first"),"warning"),a.a(2);case 1:return i.paying=!0,a.p=2,a.n=3,(0,$t.hh)(r.value.trade_no,c.value);case 3:(n=a.v).data&&(0===n.type?(f.value=n.data,k.value=null,v.value=!0):1===n.type&&(k.value=n.data,f.value=null,o="Safari"===(0,Tt.detectBrowser)(),l=Tt.PAYMENT_CONFIG.useSafariPaymentModal,o&&l?v.value=!0:Tt.PAYMENT_CONFIG.openPaymentInNewTab?setTimeout(function(){var e=document.createElement("a");e.href=n.data,e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e),v.value=!0},100):setTimeout(function(){var e=document.createElement("a");e.href=n.data,e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e)},100)),D()),a.n=5;break;case 4:a.p=4,a.v,t(e("payment.check_failed"),"error");case 5:return a.p=5,i.paying=!1,a.f(5);case 6:return a.a(2)}},a,null,[[2,4,5,6]])}));return function(){return a.apply(this,arguments)}}(),A=function(){var a=(0,At.A)((0,Et.A)().m(function a(){return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return i.cancelling=!0,m.value=!1,a.p=1,a.n=2,(0,$t.N4)(r.value.trade_no);case 2:t(e("payment.cancel_success"),"success"),u.value&&clearInterval(u.value),n.push("/shop"),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.cancel_failed"),"error");case 4:return a.p=4,i.cancelling=!1,a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}));return function(){return a.apply(this,arguments)}}(),X=function(){var a=(0,At.A)((0,Et.A)().m(function a(){var n;return(0,Et.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return i.checking=!0,a.p=1,a.n=2,(0,$t.Jf)(r.value.trade_no);case 2:0===(n=a.v).data?t(e("payment.payment_pending"),"info"):2===n.data?(t(e("payment.order_cancelled"),"warning"),u.value&&(clearInterval(u.value),u.value=null),r.value.status=n.data):(t(e("payment.payment_successful"),"success"),r.value.status=n.data,d.value=!0,u.value&&(clearInterval(u.value),u.value=null),S(),p.value=!0,setTimeout(function(){y.value=!0},300),setTimeout(function(){y.value=!1,setTimeout(function(){p.value=!1},500)},4500)),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.check_failed"),"error");case 4:return a.p=4,i.checking=!1,i.paying=!1,a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}));return function(){return a.apply(this,arguments)}}();return(0,o.sV)(function(){_(),C(),"orders"===a.query.from||document.referrer&&document.referrer.includes("/orders")?l.value=!0:l.value=!1,(0,o.wB)(function(){return r.value.status},function(e){3!==e&&4!==e||d.value||(d.value=!0,l.value||(p.value=!0,(0,o.dY)(function(){setTimeout(function(){y.value=!0},300),setTimeout(function(){y.value=!1,setTimeout(function(){p.value=!1},500)},4500)})))},{immediate:!1})}),(0,o.xo)(function(){u.value&&clearInterval(u.value)}),{loading:i,orderDetail:r,paymentMethods:s,selectedMethod:c,paymentSuccessful:d,showSuccessAnimation:p,showConfettiAnimation:y,fromOrderList:l,formatDate:function(e){return e?new Date(1e3*e).toLocaleString():"-"},formatAmount:function(e){return null==e?"-":"\xa5".concat((e/100).toFixed(2))},formatPeriod:function(t){return"reset_price"===t||"deposit"===t?e("payment.period_types.".concat(t)):{month_price:e("shop.plan.price_options.month"),quarter_price:e("shop.plan.price_options.quarter"),half_year_price:e("shop.plan.price_options.half_year"),year_price:e("shop.plan.price_options.year"),two_year_price:e("shop.plan.price_options.two_year"),three_year_price:e("shop.plan.price_options.three_year"),onetime_price:e("shop.plan.price_options.onetime")}[t]||t},formatTraffic:function(e){return e?e>=1024?"".concat((e/1024).toFixed(1)," TB"):"".concat(e," GB"):"-"},formatFee:function(t){var a="";if(t.handling_fee_percent&&(a+="".concat(t.handling_fee_percent,"%")),t.handling_fee_fixed){var n=(t.handling_fee_fixed/100).toFixed(2);a+=a?" + \xa5".concat(n):"\xa5".concat(n)}return a?"".concat(e("payment.fee"),": ").concat(a):""},selectMethod:function(e){c.value=e},checkPayment:L,cancelCurrentOrder:function(){i.cancelling||(m.value=!0)},goToDashboard:function(){"deposit"===r.value.period?n.push("/wallet/deposit"):n.push("/dashboard")},getPlanPrice:function(){return r.value&&r.value.plan&&r.value.period&&r.value.plan[r.value.period]||0},showCancelConfirm:m,confirmCancel:A,closeModal:function(){m.value=!1},showPaymentModal:v,paymentQRCode:f,paymentLink:k,PAYMENT_CONFIG:Tt.PAYMENT_CONFIG,getSelectedMethodName:function(){if(!c.value)return"";var e=s.value.find(function(e){return e.id===c.value});return e?e.name:""},processPayment:E,openPaymentLink:function(){if(k.value)try{var e="Safari"===(0,Tt.detectBrowser)();if(Tt.PAYMENT_CONFIG.openPaymentInNewTab||e&&Tt.PAYMENT_CONFIG.useSafariPaymentModal){var t=document.createElement("a");t.href=k.value,t.target="_blank",t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),document.body.removeChild(t)}else{var a=document.createElement("a");a.href=k.value,a.rel="noopener noreferrer",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}catch(e){Tt.PAYMENT_CONFIG.openPaymentInNewTab?window.open(k.value,"_blank"):window.location.href=k.value}},closePaymentModal:S,handleFeeAmount:h,totalWithFee:g,window,checkPaymentStatus:X,detectBrowser:Tt.detectBrowser,getStatusText:function(t){return{0:e("payment.status.pending"),1:e("payment.status.processing"),2:e("payment.status.cancelled"),3:e("payment.status.completed"),4:e("payment.status.discounted")}[t]||e("payment.status.unknown")},getStatusClass:function(e){return{0:"status-pending",1:"status-processing",2:"status-cancelled",3:"status-completed",4:"status-discounted"}[e]||"status-unknown"},goBack:function(){n.go(-1)}}}};const Ot=(0,a(66262).A)(Qt,[["render",function(e,t,a,Et,At,Xt){var It,Pt,Mt=(0,o.g2)("IconClock"),$t=(0,o.g2)("IconLoader2"),Tt=(0,o.g2)("IconX"),Ft=(0,o.g2)("IconCheck"),Nt=(0,o.g2)("IconHelp"),zt=(0,o.g2)("IconAlertCircle"),Qt=(0,o.g2)("IconCreditCard"),Ot=(0,o.g2)("IconCircleCheck"),Wt=(0,o.g2)("IconCircle"),xt=(0,o.g2)("IconArrowLeft"),Rt=(0,o.g2)("IconArrowRight"),Gt=(0,o.g2)("IconRefresh"),Kt=(0,o.g2)("ConfettiExplosion"),Yt=(0,o.g2)("IconAlertTriangle"),Bt=(0,o.g2)("QrcodeVue"),qt=(0,o.g2)("IconExternalLink");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("div",s,[(0,o.Lk)("div",c,[(0,o.Lk)("div",u,[(0,o.Lk)("h2",d,(0,l.toDisplayString)(e.$t("payment.title")),1)]),(0,o.Lk)("div",p,[(0,o.Lk)("p",null,(0,l.toDisplayString)(e.$t("payment.description")),1)])]),(0,o.Lk)("div",y,[(0,o.Lk)("div",m,[(0,o.Lk)("div",v,[(0,o.Lk)("div",f,[(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.product_info")),1)]),Et.loading.order?((0,o.uX)(),(0,o.CE)("div",M,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(3,function(e){return(0,o.Lk)("div",{class:"skeleton-text",key:"product-"+e})}),64))])):((0,o.uX)(),(0,o.CE)("div",k,["deposit"===Et.orderDetail.period?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",g,[(0,o.Lk)("div",_,(0,l.toDisplayString)(e.$t("wallet.deposit.title")),1),(0,o.Lk)("div",C,(0,l.toDisplayString)(Et.formatAmount(Et.orderDetail.total_amount)),1)])])):((0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("div",D,[(0,o.Lk)("div",b,(0,l.toDisplayString)(e.$t("payment.plan_name")),1),(0,o.Lk)("div",w,(0,l.toDisplayString)((null===(It=Et.orderDetail.plan)||void 0===It?void 0:It.name)||"-"),1)]),(0,o.Lk)("div",S,[(0,o.Lk)("div",E,(0,l.toDisplayString)(e.$t("payment.period")),1),(0,o.Lk)("div",A,(0,l.toDisplayString)(Et.formatPeriod(Et.orderDetail.period)),1)]),(0,o.Lk)("div",X,[(0,o.Lk)("div",I,(0,l.toDisplayString)(e.$t("payment.traffic")),1),(0,o.Lk)("div",P,(0,l.toDisplayString)(Et.formatTraffic(null===(Pt=Et.orderDetail.plan)||void 0===Pt?void 0:Pt.transfer_enable)),1)])]))]))]),(0,o.Lk)("div",$,[(0,o.Lk)("div",T,[(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.order_info")),1)]),Et.loading.order?((0,o.uX)(),(0,o.CE)("div",ce,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(5,function(e){return(0,o.Lk)("div",{class:"skeleton-text",key:"order-"+e})}),64))])):((0,o.uX)(),(0,o.CE)("div",F,[(0,o.Lk)("div",N,[(0,o.Lk)("div",z,(0,l.toDisplayString)(e.$t("payment.trade_no")),1),(0,o.Lk)("div",Q,(0,l.toDisplayString)(Et.orderDetail.trade_no||"-"),1)]),(0,o.Lk)("div",O,[(0,o.Lk)("div",W,(0,l.toDisplayString)(e.$t("payment.created_at")),1),(0,o.Lk)("div",x,(0,l.toDisplayString)(Et.formatDate(Et.orderDetail.created_at)),1)]),"deposit"===Et.orderDetail.period?((0,o.uX)(),(0,o.CE)("div",R,[(0,o.Lk)("div",G,(0,l.toDisplayString)(e.$t("wallet.deposit.title")),1),(0,o.Lk)("div",K,(0,l.toDisplayString)(Et.formatAmount(Et.orderDetail.total_amount)),1)])):((0,o.uX)(),(0,o.CE)("div",Y,[(0,o.Lk)("div",B,(0,l.toDisplayString)(e.$t("payment.total_price")),1),(0,o.Lk)("div",q,(0,l.toDisplayString)(Et.formatAmount(Et.getPlanPrice())),1)])),Et.orderDetail.discount_amount>0?((0,o.uX)(),(0,o.CE)("div",H,[(0,o.Lk)("div",V,(0,l.toDisplayString)(e.$t("payment.discount_amount")),1),(0,o.Lk)("div",J,"-"+(0,l.toDisplayString)(Et.formatAmount(Et.orderDetail.discount_amount)),1)])):(0,o.Q3)("",!0),null!==Et.orderDetail.balance_amount&&void 0!==Et.orderDetail.balance_amount&&Et.orderDetail.balance_amount>0?((0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("div",j,(0,l.toDisplayString)(e.$t("payment.use_credit")),1),(0,o.Lk)("div",Z,"-"+(0,l.toDisplayString)(Et.formatAmount(Et.orderDetail.balance_amount)),1)])):(0,o.Q3)("",!0),null!==Et.orderDetail.refund_amount&&void 0!==Et.orderDetail.refund_amount&&Et.orderDetail.refund_amount>0?((0,o.uX)(),(0,o.CE)("div",ee,[(0,o.Lk)("div",te,(0,l.toDisplayString)(e.$t("payment.refund_amount")),1),(0,o.Lk)("div",ae,(0,l.toDisplayString)(Et.formatAmount(Et.orderDetail.refund_amount)),1)])):(0,o.Q3)("",!0),Et.selectedMethod&&Et.handleFeeAmount>0?((0,o.uX)(),(0,o.CE)("div",ne,[(0,o.Lk)("div",oe,(0,l.toDisplayString)(e.$t("payment.handling_fee")),1),(0,o.Lk)("div",le,(0,l.toDisplayString)(Et.formatAmount(Et.handleFeeAmount)),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",ie,[(0,o.Lk)("div",re,(0,l.toDisplayString)(e.$t("payment.total_with_fee")),1),(0,o.Lk)("div",se,(0,l.toDisplayString)(Et.formatAmount(Et.totalWithFee)),1)])]))])]),(0,o.Lk)("div",ue,[(0,o.Lk)("div",de,[(0,o.Lk)("div",pe,[(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.order_status")),1)]),Et.loading.order?((0,o.uX)(),(0,o.CE)("div",be,(0,n.A)(t[15]||(t[15]=[(0,o.Lk)("div",{class:"skeleton-text"},null,-1)])))):((0,o.uX)(),(0,o.CE)("div",ye,[(0,o.Lk)("div",{class:(0,l.normalizeClass)(["order-status-notice",Et.getStatusClass(Et.orderDetail.status)])},[(0,o.Lk)("div",me,[0===Et.orderDetail.status&&Et.orderDetail.total_amount>0?((0,o.uX)(),(0,o.Wv)(Mt,{key:0,size:48})):0===Et.orderDetail.status&&0===Et.orderDetail.total_amount?((0,o.uX)(),(0,o.Wv)(Mt,{key:1,size:48})):1===Et.orderDetail.status?((0,o.uX)(),(0,o.Wv)($t,{key:2,size:48,class:"rotating-icon"})):2===Et.orderDetail.status?((0,o.uX)(),(0,o.Wv)(Tt,{key:3,size:48})):3===Et.orderDetail.status?((0,o.uX)(),(0,o.Wv)(Ft,{key:4,size:48})):4===Et.orderDetail.status?((0,o.uX)(),(0,o.Wv)(Ft,{key:5,size:48})):((0,o.uX)(),(0,o.Wv)(Nt,{key:6,size:48}))]),(0,o.Lk)("div",ve,[0===Et.orderDetail.status&&0===Et.orderDetail.total_amount?((0,o.uX)(),(0,o.CE)("h3",fe,(0,l.toDisplayString)(e.$t("payment.status.activate")),1)):((0,o.uX)(),(0,o.CE)("h3",ke,(0,l.toDisplayString)(Et.getStatusText(Et.orderDetail.status)),1)),0===Et.orderDetail.status&&Et.orderDetail.total_amount>0?((0,o.uX)(),(0,o.CE)("p",he,(0,l.toDisplayString)(e.$t("payment.description")),1)):1===Et.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",ge,(0,l.toDisplayString)(e.$t("payment.payment_processing")),1)):2===Et.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",_e,(0,l.toDisplayString)(e.$t("payment.order_cancelled")),1)):3===Et.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",Ce,(0,l.toDisplayString)(e.$t("payment.payment_successful_desc")),1)):4===Et.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",Le,(0,l.toDisplayString)(e.$t("payment.payment_successful_desc")),1)):0!==Et.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",De,(0,l.toDisplayString)(e.$t("payment.unknown_status_desc")),1)):(0,o.Q3)("",!0)])],2)]))]),Et.loading.order||0!==Et.orderDetail.total_amount||0!==Et.orderDetail.status?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",we,[(0,o.Lk)("div",Se,[(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.free_order")),1)]),(0,o.Lk)("div",Ee,[(0,o.bF)(zt,{size:48,class:"notice-icon success"}),(0,o.Lk)("div",Ae,[(0,o.Lk)("h3",null,(0,l.toDisplayString)(e.$t("payment.free_order_title")),1),(0,o.Lk)("p",null,(0,l.toDisplayString)(e.$t("payment.free_order_desc")),1)])])])),!Et.loading.order&&0===Et.orderDetail.status&&Et.orderDetail.total_amount>0?((0,o.uX)(),(0,o.CE)("div",Xe,[(0,o.Lk)("div",Ie,[(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.payment_method")),1)]),Et.loading.methods?((0,o.uX)(),(0,o.CE)("div",Oe,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(2,function(e){return(0,o.Lk)("div",{class:"skeleton-payment-method",key:"method-"+e})}),64))])):((0,o.uX)(),(0,o.CE)("div",Pe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Et.paymentMethods,function(e){return(0,o.uX)(),(0,o.CE)("div",{class:(0,l.normalizeClass)(["payment-method-item",{active:Et.selectedMethod===e.id}]),key:e.id,onClick:function(t){return Et.selectMethod(e.id)}},[(0,o.Lk)("div",$e,[e.icon?((0,o.uX)(),(0,o.CE)("img",{key:1,src:e.icon,alt:e.name},null,8,Te)):((0,o.uX)(),(0,o.Wv)(Qt,{key:0}))]),(0,o.Lk)("div",Fe,[(0,o.Lk)("div",Ne,(0,l.toDisplayString)(e.name),1),e.handling_fee_percent||e.handling_fee_fixed?((0,o.uX)(),(0,o.CE)("div",ze,(0,l.toDisplayString)(Et.formatFee(e)),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Qe,[Et.selectedMethod===e.id?((0,o.uX)(),(0,o.Wv)(Ot,{key:0})):((0,o.uX)(),(0,o.Wv)(Wt,{key:1}))])],10,Me)}),128))]))])):(0,o.Q3)("",!0),(0,o.Lk)("div",We,[Et.fromOrderList&&(Et.paymentSuccessful||0!==Et.orderDetail.status)?((0,o.uX)(),(0,o.CE)("div",xe,[(0,o.Lk)("button",{class:"btn-back main-action full-width",onClick:t[0]||(t[0]=function(){return Et.goBack&&Et.goBack.apply(Et,arguments)})},[(0,o.bF)(xt,{size:18}),(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.return_to_previous")),1)])])):(0,o.Q3)("",!0),(Et.paymentSuccessful||Et.orderDetail.status>0)&&!Et.fromOrderList?((0,o.uX)(),(0,o.CE)("div",Re,[(0,o.Lk)("button",{class:"btn-pay main-action full-width",onClick:t[1]||(t[1]=function(){return Et.goToDashboard&&Et.goToDashboard.apply(Et,arguments)})},[(0,o.bF)(Rt,{size:18}),"deposit"===Et.orderDetail.period?((0,o.uX)(),(0,o.CE)("span",Ge,(0,l.toDisplayString)(e.$t("payment.continue_to_wallet")),1)):((0,o.uX)(),(0,o.CE)("span",Ke,(0,l.toDisplayString)(e.$t("payment.continue_to_dashboard")),1))])])):(0,o.Q3)("",!0),Et.loading.order||0!==Et.orderDetail.status||Et.paymentSuccessful?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[Et.orderDetail.total_amount>0?((0,o.uX)(),(0,o.CE)("div",Ye,[(0,o.Lk)("button",{class:"btn-pay main-action full-width",onClick:t[2]||(t[2]=function(){return Et.processPayment&&Et.processPayment.apply(Et,arguments)}),disabled:Et.orderDetail.total_amount>0&&!Et.selectedMethod||Et.loading.paying||Et.loading.checking},[Et.loading.paying?((0,o.uX)(),(0,o.CE)("div",qe)):((0,o.uX)(),(0,o.Wv)(Qt,{key:0,size:18})),(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.pay_now")),1)],8,Be)])):(0,o.Q3)("",!0),0===Et.orderDetail.total_amount?((0,o.uX)(),(0,o.CE)("div",He,[(0,o.Lk)("button",{class:"btn-back secondary-action",onClick:t[3]||(t[3]=function(){return Et.cancelCurrentOrder&&Et.cancelCurrentOrder.apply(Et,arguments)}),disabled:Et.loading.cancelling},[Et.loading.cancelling?((0,o.uX)(),(0,o.CE)("div",Je)):((0,o.uX)(),(0,o.Wv)(Tt,{key:0,size:18})),(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.cancel_order")),1)],8,Ve),(0,o.Lk)("button",{class:"btn-pay main-action",onClick:t[4]||(t[4]=function(){return Et.checkPayment&&Et.checkPayment.apply(Et,arguments)}),disabled:Et.loading.checking},[Et.loading.checking?((0,o.uX)(),(0,o.CE)("div",je)):((0,o.uX)(),(0,o.Wv)(Qt,{key:0,size:18})),(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.activate")),1)],8,Ue)])):(0,o.Q3)("",!0),Et.orderDetail.total_amount>0?((0,o.uX)(),(0,o.CE)("div",Ze,[(0,o.Lk)("button",{class:"btn-back secondary-action",onClick:t[5]||(t[5]=function(){return Et.cancelCurrentOrder&&Et.cancelCurrentOrder.apply(Et,arguments)}),disabled:Et.loading.cancelling},[Et.loading.cancelling?((0,o.uX)(),(0,o.CE)("div",tt)):((0,o.uX)(),(0,o.Wv)(Tt,{key:0,size:18})),(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.cancel_order")),1)],8,et),(0,o.Lk)("button",{class:"btn-check secondary-action",onClick:t[6]||(t[6]=function(){return Et.checkPaymentStatus&&Et.checkPaymentStatus.apply(Et,arguments)}),disabled:Et.orderDetail.total_amount>0&&!Et.selectedMethod||Et.loading.checking||Et.loading.paying},[Et.loading.checking?((0,o.uX)(),(0,o.CE)("div",nt)):((0,o.uX)(),(0,o.Wv)(Gt,{key:0,size:18})),(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.check_payment")),1)],8,at)])):(0,o.Q3)("",!0)],64))])])])]),(0,o.bF)(i.Transition,{name:"fade"},{default:(0,o.k6)(function(){return[Et.showSuccessAnimation?((0,o.uX)(),(0,o.CE)("div",ot,[(0,o.Lk)("div",lt,[(0,o.Lk)("div",it,[(0,o.Lk)("div",rt,[(0,o.bF)(Ft,{size:100,class:"check-icon"})])]),(0,o.Lk)("h2",null,(0,l.toDisplayString)(e.$t("payment.payment_successful")),1),(0,o.Lk)("p",null,(0,l.toDisplayString)(e.$t("payment.payment_successful_desc")),1)]),Et.showConfettiAnimation?((0,o.uX)(),(0,o.CE)("div",st,[(0,o.bF)(Kt,{particleCount:150,force:.4,stageWidth:Et.window.innerWidth,stageHeight:Et.window.innerHeight,colors:["#ffcc00","#ff8800","#ff3333","#26A65B","#42A5F5","#9C27B0"]},null,8,["stageWidth","stageHeight"])])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]}),_:1}),(0,o.bF)(i.Transition,{name:"modal-fade"},{default:(0,o.k6)(function(){return[Et.showCancelConfirm?((0,o.uX)(),(0,o.CE)("div",ct,[(0,o.Lk)("div",{class:"cancel-modal-overlay",onClick:t[7]||(t[7]=function(){return Et.closeModal&&Et.closeModal.apply(Et,arguments)})}),(0,o.Lk)("div",ut,[(0,o.Lk)("div",dt,[(0,o.Lk)("div",pt,[(0,o.bF)(Yt,{size:28})]),(0,o.Lk)("div",yt,[(0,o.Lk)("h3",null,(0,l.toDisplayString)(e.$t("payment.confirm_cancel_title")),1),(0,o.Lk)("p",null,(0,l.toDisplayString)(e.$t("payment.confirm_cancel_desc")),1)]),(0,o.Lk)("div",mt,[(0,o.Lk)("button",{class:"cancel-btn",onClick:t[8]||(t[8]=function(){return Et.closeModal&&Et.closeModal.apply(Et,arguments)})},(0,l.toDisplayString)(e.$t("common.cancel")),1),(0,o.Lk)("button",{class:"confirm-btn",onClick:t[9]||(t[9]=function(){return Et.confirmCancel&&Et.confirmCancel.apply(Et,arguments)})},(0,l.toDisplayString)(e.$t("common.confirm")),1)])])])])):(0,o.Q3)("",!0)]}),_:1}),(0,o.bF)(i.Transition,{name:"modal"},{default:(0,o.k6)(function(){return[Et.showPaymentModal?((0,o.uX)(),(0,o.CE)("div",vt,[(0,o.Lk)("div",{class:"modal-backdrop",onClick:t[10]||(t[10]=function(){return Et.closePaymentModal&&Et.closePaymentModal.apply(Et,arguments)})}),(0,o.Lk)("div",ft,[(0,o.Lk)("div",kt,[(0,o.Lk)("button",{class:"close-button",onClick:t[11]||(t[11]=function(){return Et.closePaymentModal&&Et.closePaymentModal.apply(Et,arguments)})},"\xd7"),(0,o.Lk)("div",ht,[(0,o.Lk)("div",gt,[(0,o.bF)(Qt,{size:32})]),(0,o.Lk)("h3",null,(0,l.toDisplayString)(Et.selectedMethod?Et.getSelectedMethodName():e.$t("payment.payment_method")),1),"Safari"===Et.detectBrowser()&&Et.PAYMENT_CONFIG.useSafariPaymentModal&&Et.paymentLink?((0,o.uX)(),(0,o.CE)("p",_t,(0,l.toDisplayString)(e.$t("payment.safari_payment_notice")),1)):((0,o.uX)(),(0,o.CE)("p",Ct,(0,l.toDisplayString)(e.$t("payment.scan_qrcode")),1)),Et.paymentQRCode?((0,o.uX)(),(0,o.CE)("div",Lt,[(0,o.bF)(Bt,{value:Et.paymentQRCode,size:Et.PAYMENT_CONFIG.qrcodeSize,background:Et.PAYMENT_CONFIG.qrcodeBackground,foreground:Et.PAYMENT_CONFIG.qrcodeColor,level:"H","render-as":"svg"},null,8,["value","size","background","foreground"])])):(0,o.Q3)("",!0),Et.paymentLink?((0,o.uX)(),(0,o.CE)("div",Dt,[(0,o.Lk)("button",{class:"btn-link",onClick:t[12]||(t[12]=function(){return Et.openPaymentLink&&Et.openPaymentLink.apply(Et,arguments)})},[(0,o.bF)(qt,{size:18}),"Safari"===Et.detectBrowser()&&Et.PAYMENT_CONFIG.useSafariPaymentModal?((0,o.uX)(),(0,o.CE)("span",bt,(0,l.toDisplayString)(e.$t("payment.safari_payment_button")),1)):((0,o.uX)(),(0,o.CE)("span",wt,(0,l.toDisplayString)(e.$t("payment.open_in_new_tab")),1))])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",St,[(0,o.Lk)("button",{class:"btn-secondary",onClick:t[13]||(t[13]=function(){return Et.closePaymentModal&&Et.closePaymentModal.apply(Et,arguments)})},[(0,o.bF)(Tt,{size:18}),(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("common.cancel")),1)]),(0,o.Lk)("button",{class:"btn-primary",onClick:t[14]||(t[14]=function(){return Et.checkPayment&&Et.checkPayment.apply(Et,arguments)})},[(0,o.bF)(Gt,{size:18}),(0,o.Lk)("span",null,(0,l.toDisplayString)(e.$t("payment.check_payment")),1)])])])])])):(0,o.Q3)("",!0)]}),_:1})])}],["__scopeId","data-v-5bdcc1e9"]]),Wt=Ot}}]);