"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[4609,8321],{11935(e,o,a){a.d(o,{f:()=>p,n:()=>h});var n=a(20908),t=a(30388),r=(a(74423),a(44114),a(26099),a(27495),a(21699),a(47764),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(71029)),i=a(33366),s=a(46992),l=a(5947),c=a.n(l),u=a(2636),d=a(29501),g={verifyToken:null,redirectPath:null,originalUrl:""};!function(){try{g.originalUrl=window.location.href;var e=window.location.hash||"";if(e.includes("?")){var o=e.split("?")[1];if(o){var a=new URLSearchParams(o);g.verifyToken=a.get("verify"),g.redirectPath=a.get("redirect")}}if(!g.verifyToken){var n=new URLSearchParams(window.location.search);g.verifyToken=n.get("verify"),g.redirectPath=n.get("redirect")}}catch(e){}}();var p=function(){var e=(0,t.A)((0,n.A)().m(function e(){var o,a,t,l,p,h,v,f,m,w,k,L,y,C,A,b=arguments;return(0,n.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=b.length>0&&void 0!==b[0]?b[0]:{},a=(0,r.rd)(),t=(0,i.d)(),l=t.showToast,p=(0,s.s9)(),h=p.t,v=g.verifyToken,f=g.redirectPath,v||(m=window.location.hash,w=new URLSearchParams,m.includes("?")&&(w=new URLSearchParams(m.split("?")[1]||"")),k=m.split("/"),(L=k[k.length-1])&&L.includes("?")&&(w=new URLSearchParams(L.split("?")[1]||"")),v=w.get("verify"),f=w.get("redirect"),v||(y=new URLSearchParams(window.location.search),v=y.get("verify"),f=y.get("redirect"))),f=f||"/dashboard",v){e.n=1;break}return e.a(2,{success:!1,verified:!1});case 1:return c().start(),e.p=2,e.n=3,(0,u.tokenLogin)(v,f);case 3:if(!(C=e.v).data||!C.data.token&&!C.data.auth_data){e.n=4;break}return l(C.message||h("auth.verifyTokenSuccess"),"success"),(0,u.handleLoginSuccess)(C.data,!1).success,A=(0,d.iU)(f),o.onLoginSuccess&&"function"==typeof o.onLoginSuccess&&o.onLoginSuccess(),setTimeout(function(){a.push(A)},500),e.a(2,{success:!0,verified:!0,redirectPath:A});case 4:return l(h("auth.verifyTokenFailed"),"error"),e.a(2,{success:!1,verified:!0,error:h("auth.verifyTokenFailed")});case 5:e.n=7;break;case 6:return e.p=6,e.v,l(h("auth.verifyTokenFailed"),"error"),e.a(2,{success:!1,verified:!0,error:h("auth.verifyTokenFailed")});case 7:return e.p=7,c().done(),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}));return function(){return e.apply(this,arguments)}}(),h=function(){if(g.verifyToken)return!0;var e=window.location.hash,o=new URLSearchParams;e.includes("?")&&(o=new URLSearchParams(e.split("?")[1]||""));var a=e.split("/"),n=a[a.length-1];n&&n.includes("?")&&(o=new URLSearchParams(n.split("?")[1]||""));var t=new URLSearchParams(window.location.search);return o.has("verify")||t.has("verify")||!!g.verifyToken}},65913(e,o,a){a.r(o),a.d(o,{default:()=>ue});var n=a(20641),t=a(90033),r=a(53751),i={class:"login-view-container"},s={class:"auth-split-container"},l={class:"auth-split-right"},c={class:"top-toolbar"},u={key:0,class:"auth-form-container"},d={class:"loading-container"},g={key:1,class:"auth-form-container"},p={class:"auth-header"},h={class:"auth-logo"},v=["src"],f={class:"auth-title"},m={class:"auth-subtitle"},w={class:"form-group"},k={for:"email"},L={class:"input-with-icon"},y=["placeholder"],C={key:0,class:"error-message"},A={class:"form-group"},b={for:"password"},T={class:"input-with-icon"},S=["type","placeholder"],U={key:0,class:"error-message"},_={class:"form-options"},I={class:"remember-me"},O={class:"checkbox-container"},P={class:"checkbox-label"},F=["disabled"],N={key:0,class:"loading-wrapper"},E={key:1},G={class:"auth-footer"},D={class:"auth-divider"},H={class:"auth-divider-text"},R={class:"auth-divider"},M={class:"auth-divider-text"};var W=a(20908),Y=a(30388),$=(a(44114),a(23288),a(26099),a(27495),a(47764),a(25440),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(50953)),K=a(71029),X=a(46992),x=a(33366),z=a(99668),q=a(71172),Q=a(46553),V=a(94634),B=a(36886),j=a(79473),J=a(63259),Z=a(2636),ee=a(92614),oe=a(93824),ae=a(11935),ne=a(80394),te=a(88774),re=a(52072),ie=a(84320),se=a(65165);const le={name:"LoginView",components:{ThemeToggle:z.A,LanguageSelector:q.A,IconMail:Q.A,IconLock:V.A,IconArrowRight:B.A,IconEye:j.A,IconEyeOff:J.A,DomainAuthAlert:oe.A,AuthPopup:te.A,ThirdPartyLogin:se.default},setup:function(){var e,o,a,t,r=(0,K.rd)(),i=(0,X.s9)().t,s=(0,x.d)().showToast,l=(0,ie.b)().goTo,c=(0,$.KR)("./images/logo.png"),u=(0,$.Kh)({email:"",password:"",rememberMe:!1}),d=(0,$.Kh)({email:"",password:""}),g=(0,$.KR)(!1),p=(0,$.KR)(!1),h=(0,$.KR)(!1),v=(0,$.KR)(!1),f=(0,$.KR)(!1),m=(0,$.Kh)({title:(null===(e=ne.AUTH_CONFIG.popup)||void 0===e?void 0:e.title)||"",content:(null===(o=ne.AUTH_CONFIG.popup)||void 0===o?void 0:o.content)||"",cooldownHours:(null===(a=ne.AUTH_CONFIG.popup)||void 0===a?void 0:a.cooldownHours)||24,closeWaitSeconds:(null===(t=ne.AUTH_CONFIG.popup)||void 0===t?void 0:t.closeWaitSeconds)||0}),w=(0,$.KR)(!1),k=(0,$.KR)(),L=function(){var e=(0,Y.A)((0,W.A)().m(function e(){var o;return(0,W.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,Z.getWebsiteConfig)();case 1:o=e.v,k.value=o.data;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(e){if(e.origin===window.location.origin&&e.data&&"oauth_login_success"===e.data.type){var o=e.data.data,a=o.token,n=o.is_admin,t=o.auth_data;a&&(localStorage.setItem("token",a),localStorage.setItem("is_admin",n),localStorage.setItem("auth_data",t),window.location.reload())}},C=(0,n.EW)(function(){var e;return!1!==(null===ne.AUTH_LAYOUT_CONFIG||void 0===ne.AUTH_LAYOUT_CONFIG||null===(e=ne.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e||null===(e=e.siteName)||void 0===e?void 0:e.show)}),A=(0,n.EW)(function(){var e;return"black"===((null===ne.AUTH_LAYOUT_CONFIG||void 0===ne.AUTH_LAYOUT_CONFIG||null===(e=ne.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e||null===(e=e.siteName)||void 0===e?void 0:e.color)||"white").toLowerCase()?"black":"white"}),b=(0,n.EW)(function(){var e,o=(null===ne.AUTH_LAYOUT_CONFIG||void 0===ne.AUTH_LAYOUT_CONFIG||null===(e=ne.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e?void 0:e.backgroundImage)||"";return o?{"background-image":"url(".concat(o,")"),"background-position":"center","background-size":"cover","background-repeat":"no-repeat"}:{background:"var(--theme-color)"}}),T=(0,n.EW)(function(){var e;return!1!==(null===ne.AUTH_LAYOUT_CONFIG||void 0===ne.AUTH_LAYOUT_CONFIG||null===(e=ne.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e||null===(e=e.greeting)||void 0===e?void 0:e.show)}),S=(0,n.EW)(function(){return O()}),U=(0,n.EW)(function(){var e;return"black"===((null===ne.AUTH_LAYOUT_CONFIG||void 0===ne.AUTH_LAYOUT_CONFIG||null===(e=ne.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e||null===(e=e.greeting)||void 0===e?void 0:e.color)||"white").toLowerCase()?"black":"white"});(0,n.sV)((0,Y.A)((0,W.A)().m(function e(){var o,a;return(0,W.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(window.addEventListener("message",y),L(),!(0,ae.n)()){e.n=6;break}return g.value=!0,e.p=1,e.n=2,(0,ae.f)({onLoginSuccess:function(){}});case 2:if(!e.v.success){e.n=3;break}return e.a(2);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,g.value=!1,e.f(5);case 6:if(o=new URLSearchParams(window.location.search),!("true"===o.get("logout"))){e.n=7;break}return s(i("auth.logoutSuccess"),"success",3e3),window.history&&window.history.replaceState&&(a=window.location.href.replace("?logout=true","").replace("&logout=true",""),window.history.replaceState({},document.title,a)),e.a(2);case 7:if(e.p=7,!0!==window._isLoggingOut){e.n=8;break}return e.a(2);case 8:(0,Z.checkLoginStatus)()&&(s(i("auth.alreadyLoggedIn"),"info"),setTimeout(function(){r.push("/dashboard")},500)),f.value=(0,re.z)(ne.AUTH_CONFIG.popup),e.n=10;break;case 9:e.p=9,e.v;case 10:return e.a(2)}},e,null,[[7,9],[1,4,5,6]])}))),(0,n.xo)(function(){window.removeEventListener("message",y)});var _=function(){var e=!0;return d.email="",d.password="",(0,ee.Kf)(u.email)?(0,ee.DT)(u.email)||(d.email=i("validation.emailInvalid"),e=!1):(d.email=i("validation.emailRequired"),e=!1),(0,ee.Kf)(u.password)||(d.password=i("validation.passwordRequired"),e=!1),e},I=function(){var e=(0,Y.A)((0,W.A)().m(function e(){var o,a,n;return(0,W.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(_()){e.n=1;break}return e.a(2);case 1:return g.value=!0,e.p=2,e.n=3,(0,Z.login)(u);case 3:o=e.v,s(o.message||i("auth.loginSuccess"),"success",3e3),setTimeout(function(){r.push("/dashboard")},300),e.n=5;break;case 4:e.p=4,n=e.v,s((null===(a=n.response)||void 0===a?void 0:a.message)||n.message||i("auth.loginFailed"),"error");case 5:return e.p=5,g.value=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(new Date).getHours();return e>=5&&e<12?"Good Morning":e>=12&&e<18?"Good Afternoon":e>=18&&e<22?"Good Evening":"Good Night"};return{formData:u,errors:d,loading:g,showPassword:w,handleLogin:I,logoPath:c,handleLogoError:function(){c.value="/images/logo.png"},leftSideStyles:b,configLoading:p,showCaptchaModal:h,isClosingModal:v,showSiteName:C,siteNameColorClass:A,SITE_CONFIG:ne.SITE_CONFIG,showGreeting:T,greetingMessage:S,greetingColorClass:U,getTimeBasedGreeting:O,showAuthPopup:f,authPopupConfig:m,handleAuthPopupClose:function(){f.value=!1},goTo:l,configInfo:k,handleMessage:y}}};const ce=(0,a(66262).A)(le,[["render",function(e,o,a,W,Y,$){var K=(0,n.g2)("ThemeToggle"),X=(0,n.g2)("LanguageSelector"),x=(0,n.g2)("IconMail"),z=(0,n.g2)("IconLock"),q=(0,n.g2)("IconEye"),Q=(0,n.g2)("IconEyeOff"),V=(0,n.g2)("router-link"),B=(0,n.g2)("IconArrowRight"),j=(0,n.g2)("ThirdPartyLogin"),J=(0,n.g2)("AuthPopup");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",s,[(0,n.Lk)("div",{class:"auth-split-left",style:(0,t.normalizeStyle)(W.leftSideStyles)},[o[8]||(o[8]=(0,n.Lk)("div",{class:"left-content-overlay"},null,-1)),W.showSiteName?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,t.normalizeClass)(["site-name",W.siteNameColorClass]),onClick:o[0]||(o[0]=function(e){return W.goTo("/")})},(0,t.toDisplayString)(W.SITE_CONFIG.siteName),3)):(0,n.Q3)("",!0),W.showGreeting?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,t.normalizeClass)(["greeting-text",W.greetingColorClass])},(0,t.toDisplayString)(W.greetingMessage),3)):(0,n.Q3)("",!0)],4),(0,n.Lk)("div",l,[(0,n.Lk)("div",c,[(0,n.bF)(K),(0,n.bF)(X)]),W.configLoading?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",d,[o[9]||(o[9]=(0,n.Lk)("div",{class:"loading-spinner"},null,-1)),(0,n.Lk)("p",null,(0,t.toDisplayString)(e.$t("common.loading")),1)])])):((0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("div",p,[(0,n.Lk)("div",h,[(0,n.Lk)("img",{src:W.logoPath,alt:"Logo",onError:o[1]||(o[1]=function(){return W.handleLogoError&&W.handleLogoError.apply(W,arguments)}),onClick:o[2]||(o[2]=function(e){return W.goTo("/")})},null,40,v)]),(0,n.Lk)("h1",f,(0,t.toDisplayString)(e.$t("auth.loginTitle")),1),(0,n.Lk)("p",m,(0,t.toDisplayString)(e.$t("auth.loginSubtitle")),1)]),(0,n.Lk)("form",{class:"auth-form",onSubmit:o[7]||(o[7]=(0,r.withModifiers)(function(){return W.handleLogin&&W.handleLogin.apply(W,arguments)},["prevent"]))},[(0,n.Lk)("div",w,[(0,n.Lk)("label",k,[(0,n.eW)((0,t.toDisplayString)(e.$t("common.email"))+" ",1),o[10]||(o[10]=(0,n.Lk)("span",{class:"required"},"*",-1))]),(0,n.Lk)("div",L,[(0,n.bF)(x,{class:"input-icon"}),(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":o[3]||(o[3]=function(e){return W.formData.email=e}),class:"form-control",placeholder:e.$t("auth.emailPlaceholder"),required:""},null,8,y),[[r.vModelText,W.formData.email]])]),W.errors.email?((0,n.uX)(),(0,n.CE)("div",C,(0,t.toDisplayString)(W.errors.email),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",A,[(0,n.Lk)("label",b,[(0,n.eW)((0,t.toDisplayString)(e.$t("common.password"))+" ",1),o[11]||(o[11]=(0,n.Lk)("span",{class:"required"},"*",-1))]),(0,n.Lk)("div",T,[(0,n.bF)(z,{class:"input-icon"}),(0,n.bo)((0,n.Lk)("input",{type:W.showPassword?"text":"password",id:"password","onUpdate:modelValue":o[4]||(o[4]=function(e){return W.formData.password=e}),class:"form-control",placeholder:e.$t("auth.passwordPlaceholder"),required:""},null,8,S),[[r.vModelDynamic,W.formData.password]]),(0,n.Lk)("div",{class:"password-toggle",onClick:o[5]||(o[5]=function(e){return W.showPassword=!W.showPassword})},[W.showPassword?((0,n.uX)(),(0,n.Wv)(Q,{key:1})):((0,n.uX)(),(0,n.Wv)(q,{key:0}))])]),W.errors.password?((0,n.uX)(),(0,n.CE)("div",U,(0,t.toDisplayString)(W.errors.password),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",_,[(0,n.Lk)("div",I,[(0,n.Lk)("label",O,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[6]||(o[6]=function(e){return W.formData.rememberMe=e})},null,512),[[r.vModelCheckbox,W.formData.rememberMe]]),o[12]||(o[12]=(0,n.Lk)("span",{class:"checkmark"},null,-1)),(0,n.Lk)("span",P,(0,t.toDisplayString)(e.$t("common.rememberMe")),1)])]),(0,n.bF)(V,{to:"/forgot-password",class:"forgot-password"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,t.toDisplayString)(e.$t("common.forgotPassword")),1)]}),_:1})]),(0,n.Lk)("button",{type:"submit",class:"btn btn-primary btn-block",disabled:W.loading},[W.loading?((0,n.uX)(),(0,n.CE)("span",N,[(0,n.Lk)("span",null,(0,t.toDisplayString)(e.$t("common.loading")),1)])):((0,n.uX)(),(0,n.CE)("span",E,[(0,n.eW)((0,t.toDisplayString)(e.$t("common.login"))+" ",1),(0,n.bF)(B,{class:"icon-right"})]))],8,F)],32),(0,n.Lk)("div",G,[(0,n.Lk)("div",D,[(0,n.Lk)("span",H,(0,t.toDisplayString)(e.$t("auth.thirdPartyLogin")),1)]),(0,n.bF)(j,{config:W.configInfo},null,8,["config"]),(0,n.Lk)("div",R,[(0,n.Lk)("span",M,(0,t.toDisplayString)(e.$t("auth.noAccount")),1)]),(0,n.bF)(V,{to:"/register",class:"btn btn-secondary btn-block",replace:""},{default:(0,n.k6)(function(){return[(0,n.eW)((0,t.toDisplayString)(e.$t("auth.createAccount")),1)]}),_:1})])]))])]),W.showCaptchaModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,t.normalizeClass)(["captcha-modal",{closing:W.isClosingModal}])},null,2)):(0,n.Q3)("",!0),(0,n.bF)(J,{"show-popup":W.showAuthPopup,title:W.authPopupConfig.title,content:W.authPopupConfig.content,"cooldown-hours":W.authPopupConfig.cooldownHours,"close-wait-seconds":W.authPopupConfig.closeWaitSeconds,onClose:W.handleAuthPopupClose},null,8,["show-popup","title","content","cooldown-hours","close-wait-seconds","onClose"])])}],["__scopeId","data-v-50d7e7c8"]]),ue=ce}}]);