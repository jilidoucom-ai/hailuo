"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[1693,4609],{11935(e,o,a){a.d(o,{f:()=>h,n:()=>g});var n=a(20908),r=a(30388),t=(a(74423),a(44114),a(26099),a(27495),a(21699),a(47764),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(71029)),s=a(33366),i=a(46992),l=a(5947),c=a.n(l),u=a(2636),d=a(29501),p={verifyToken:null,redirectPath:null,originalUrl:""};!function(){try{p.originalUrl=window.location.href;var e=window.location.hash||"";if(e.includes("?")){var o=e.split("?")[1];if(o){var a=new URLSearchParams(o);p.verifyToken=a.get("verify"),p.redirectPath=a.get("redirect")}}if(!p.verifyToken){var n=new URLSearchParams(window.location.search);p.verifyToken=n.get("verify"),p.redirectPath=n.get("redirect")}}catch(e){}}();var h=function(){var e=(0,r.A)((0,n.A)().m(function e(){var o,a,r,l,h,g,f,v,m,w,k,L,b,y,S,P=arguments;return(0,n.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=P.length>0&&void 0!==P[0]?P[0]:{},a=(0,t.rd)(),r=(0,s.d)(),l=r.showToast,h=(0,i.s9)(),g=h.t,f=p.verifyToken,v=p.redirectPath,f||(m=window.location.hash,w=new URLSearchParams,m.includes("?")&&(w=new URLSearchParams(m.split("?")[1]||"")),k=m.split("/"),(L=k[k.length-1])&&L.includes("?")&&(w=new URLSearchParams(L.split("?")[1]||"")),f=w.get("verify"),v=w.get("redirect"),f||(b=new URLSearchParams(window.location.search),f=b.get("verify"),v=b.get("redirect"))),v=v||"/dashboard",f){e.n=1;break}return e.a(2,{success:!1,verified:!1});case 1:return c().start(),e.p=2,e.n=3,(0,u.tokenLogin)(f,v);case 3:if(!(y=e.v).data||!y.data.token&&!y.data.auth_data){e.n=4;break}return l(y.message||g("auth.verifyTokenSuccess"),"success"),(0,u.handleLoginSuccess)(y.data,!1).success,S=(0,d.iU)(v),o.onLoginSuccess&&"function"==typeof o.onLoginSuccess&&o.onLoginSuccess(),setTimeout(function(){a.push(S)},500),e.a(2,{success:!0,verified:!0,redirectPath:S});case 4:return l(g("auth.verifyTokenFailed"),"error"),e.a(2,{success:!1,verified:!0,error:g("auth.verifyTokenFailed")});case 5:e.n=7;break;case 6:return e.p=6,e.v,l(g("auth.verifyTokenFailed"),"error"),e.a(2,{success:!1,verified:!0,error:g("auth.verifyTokenFailed")});case 7:return e.p=7,c().done(),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}));return function(){return e.apply(this,arguments)}}(),g=function(){if(p.verifyToken)return!0;var e=window.location.hash,o=new URLSearchParams;e.includes("?")&&(o=new URLSearchParams(e.split("?")[1]||""));var a=e.split("/"),n=a[a.length-1];n&&n.includes("?")&&(o=new URLSearchParams(n.split("?")[1]||""));var r=new URLSearchParams(window.location.search);return o.has("verify")||r.has("verify")||!!p.verifyToken}},64757(e,o,a){a.r(o),a.d(o,{default:()=>se});var n=a(20641),r=a(90033),t=a(53751),s={class:"auth-container"},i={class:"top-toolbar"},l={class:"auth-card"},c={class:"auth-header"},u={class:"auth-logo"},d=["src"],p={class:"auth-title"},h={class:"auth-subtitle"},g={class:"form-group"},f={for:"email"},v={class:"input-with-icon"},m=["placeholder"],w={key:0,class:"error-message"},k={class:"form-group"},L={for:"password"},b={class:"input-with-icon"},y=["type","placeholder"],S={key:0,class:"error-message"},P={class:"form-options"},A={class:"remember-me"},T={class:"checkbox-container"},C={class:"checkbox-label"},D=["disabled"],I={key:0,class:"loading-wrapper"},U={key:1},R={class:"auth-footer"},F={class:"auth-divider"},_={class:"auth-divider-text"},E={class:"auth-divider"},$={class:"auth-divider-text"};var M=a(20908),W=a(30388),K=(a(44114),a(26099),a(27495),a(47764),a(25440),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(50953)),x=a(71029),H=a(46992),O=a(33366),X=a(99668),q=a(71172),G=a(46553),N=a(94634),V=a(36886),z=a(79473),Q=a(63259),j=a(2636),B=a(92614),J=a(93824),Y=a(11935),Z=a(80394),ee=a(88774),oe=a(52072),ae=a(84320),ne=a(65165);const re={name:"LoginView",components:{ThemeToggle:X.A,LanguageSelector:q.A,IconMail:G.A,IconLock:N.A,IconArrowRight:V.A,IconEye:z.A,IconEyeOff:Q.A,DomainAuthAlert:J.A,AuthPopup:ee.A,ThirdPartyLogin:ne.default},setup:function(){var e,o,a,r,t=(0,x.rd)(),s=(0,H.s9)().t,i=(0,O.d)().showToast,l=(0,ae.b)().goTo,c=(0,K.KR)("./images/logo.png"),u=(0,K.Kh)({email:"",password:"",rememberMe:!1}),d=(0,K.Kh)({email:"",password:""}),p=(0,K.KR)(!1),h=(0,K.KR)(!1),g=(0,K.KR)(),f=(0,K.KR)(!1),v=(0,K.Kh)({title:(null===(e=Z.AUTH_CONFIG.popup)||void 0===e?void 0:e.title)||"",content:(null===(o=Z.AUTH_CONFIG.popup)||void 0===o?void 0:o.content)||"",cooldownHours:(null===(a=Z.AUTH_CONFIG.popup)||void 0===a?void 0:a.cooldownHours)||24,closeWaitSeconds:(null===(r=Z.AUTH_CONFIG.popup)||void 0===r?void 0:r.closeWaitSeconds)||0}),m=function(){var e=(0,W.A)((0,M.A)().m(function e(){var o;return(0,M.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,j.getWebsiteConfig)();case 1:o=e.v,g.value=o.data;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),w=function(e){if(e.origin===window.location.origin&&e.data&&"oauth_login_success"===e.data.type){var o=e.data.data,a=o.token,n=o.is_admin,r=o.auth_data;a&&(localStorage.setItem("token",a),localStorage.setItem("is_admin",n),localStorage.setItem("auth_data",r),window.location.reload())}};(0,n.sV)((0,W.A)((0,M.A)().m(function e(){var o,a;return(0,M.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(window.addEventListener("message",w),m(),!(0,Y.n)()){e.n=6;break}return p.value=!0,e.p=1,e.n=2,(0,Y.f)({onLoginSuccess:function(){}});case 2:if(!e.v.success){e.n=3;break}return e.a(2);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,p.value=!1,e.f(5);case 6:if(o=new URLSearchParams(window.location.search),!("true"===o.get("logout"))){e.n=7;break}return i(s("auth.logoutSuccess"),"success",3e3),window.history&&window.history.replaceState&&(a=window.location.href.replace("?logout=true","").replace("&logout=true",""),window.history.replaceState({},document.title,a)),e.a(2);case 7:if(f.value=(0,oe.z)(Z.AUTH_CONFIG.popup),e.p=8,!0!==window._isLoggingOut){e.n=9;break}return e.a(2);case 9:(0,j.checkLoginStatus)()&&(i(s("auth.alreadyLoggedIn"),"info"),setTimeout(function(){t.push("/dashboard")},500)),e.n=11;break;case 10:e.p=10,e.v;case 11:return e.a(2)}},e,null,[[8,10],[1,4,5,6]])}))),(0,n.xo)(function(){window.removeEventListener("message",w)});var k=function(){var e=!0;return d.email="",d.password="",(0,B.Kf)(u.email)?(0,B.DT)(u.email)||(d.email=s("validation.emailInvalid"),e=!1):(d.email=s("validation.emailRequired"),e=!1),(0,B.Kf)(u.password)||(d.password=s("validation.passwordRequired"),e=!1),e},L=function(){var e=(0,W.A)((0,M.A)().m(function e(){var o,a,n;return(0,M.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(k()){e.n=1;break}return e.a(2);case 1:return p.value=!0,e.p=2,e.n=3,(0,j.login)(u);case 3:o=e.v,i(o.message||s("auth.loginSuccess"),"success",3e3),setTimeout(function(){t.push("/dashboard")},300),e.n=5;break;case 4:e.p=4,n=e.v,i((null===(a=n.response)||void 0===a?void 0:a.message)||n.message||s("auth.loginFailed"),"error");case 5:return e.p=5,p.value=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}();return{formData:u,errors:d,loading:p,showPassword:h,handleLogin:L,logoPath:c,handleLogoError:function(){c.value="/images/logo.png"},showAuthPopup:f,authPopupConfig:v,handleAuthPopupClose:function(){f.value=!1},goTo:l,configInfo:g,handleMessage:w}}};const te=(0,a(66262).A)(re,[["render",function(e,o,a,M,W,K){var x=(0,n.g2)("ThemeToggle"),H=(0,n.g2)("LanguageSelector"),O=(0,n.g2)("IconMail"),X=(0,n.g2)("IconLock"),q=(0,n.g2)("IconEye"),G=(0,n.g2)("IconEyeOff"),N=(0,n.g2)("router-link"),V=(0,n.g2)("IconArrowRight"),z=(0,n.g2)("ThirdPartyLogin"),Q=(0,n.g2)("AuthPopup");return(0,n.uX)(),(0,n.CE)("div",s,[o[10]||(o[10]=(0,n.Lk)("div",{class:"background-decoration"},[(0,n.Lk)("div",{class:"floating-ball ball-1"}),(0,n.Lk)("div",{class:"floating-ball ball-2"}),(0,n.Lk)("div",{class:"floating-ball ball-3"})],-1)),(0,n.Lk)("div",i,[(0,n.bF)(x),(0,n.bF)(H)]),(0,n.Lk)("div",l,[(0,n.Lk)("div",c,[(0,n.Lk)("div",u,[(0,n.Lk)("img",{src:M.logoPath,alt:"Logo",onError:o[0]||(o[0]=function(){return M.handleLogoError&&M.handleLogoError.apply(M,arguments)}),onClick:o[1]||(o[1]=function(e){return M.goTo("/")})},null,40,d)]),(0,n.Lk)("h1",p,(0,r.toDisplayString)(e.$t("auth.loginTitle")),1),(0,n.Lk)("p",h,(0,r.toDisplayString)(e.$t("auth.loginSubtitle")),1)]),(0,n.Lk)("form",{class:"auth-form",onSubmit:o[6]||(o[6]=(0,t.withModifiers)(function(){return M.handleLogin&&M.handleLogin.apply(M,arguments)},["prevent"]))},[(0,n.Lk)("div",g,[(0,n.Lk)("label",f,[(0,n.eW)((0,r.toDisplayString)(e.$t("common.email"))+" ",1),o[7]||(o[7]=(0,n.Lk)("span",{class:"required"},"*",-1))]),(0,n.Lk)("div",v,[(0,n.bF)(O,{class:"input-icon"}),(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":o[2]||(o[2]=function(e){return M.formData.email=e}),class:"form-control",placeholder:e.$t("auth.emailPlaceholder"),required:""},null,8,m),[[t.vModelText,M.formData.email]])]),M.errors.email?((0,n.uX)(),(0,n.CE)("div",w,(0,r.toDisplayString)(M.errors.email),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",k,[(0,n.Lk)("label",L,[(0,n.eW)((0,r.toDisplayString)(e.$t("common.password"))+" ",1),o[8]||(o[8]=(0,n.Lk)("span",{class:"required"},"*",-1))]),(0,n.Lk)("div",b,[(0,n.bF)(X,{class:"input-icon"}),(0,n.bo)((0,n.Lk)("input",{type:M.showPassword?"text":"password",id:"password","onUpdate:modelValue":o[3]||(o[3]=function(e){return M.formData.password=e}),class:"form-control",placeholder:e.$t("auth.passwordPlaceholder"),required:""},null,8,y),[[t.vModelDynamic,M.formData.password]]),(0,n.Lk)("div",{class:"password-toggle",onClick:o[4]||(o[4]=function(e){return M.showPassword=!M.showPassword})},[M.showPassword?((0,n.uX)(),(0,n.Wv)(G,{key:1})):((0,n.uX)(),(0,n.Wv)(q,{key:0}))])]),M.errors.password?((0,n.uX)(),(0,n.CE)("div",S,(0,r.toDisplayString)(M.errors.password),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",P,[(0,n.Lk)("div",A,[(0,n.Lk)("label",T,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=function(e){return M.formData.rememberMe=e})},null,512),[[t.vModelCheckbox,M.formData.rememberMe]]),o[9]||(o[9]=(0,n.Lk)("span",{class:"checkmark"},null,-1)),(0,n.Lk)("span",C,(0,r.toDisplayString)(e.$t("common.rememberMe")),1)])]),(0,n.bF)(N,{to:"/forgot-password",class:"forgot-password"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.toDisplayString)(e.$t("common.forgotPassword")),1)]}),_:1})]),(0,n.Lk)("button",{type:"submit",class:"btn btn-primary btn-block",disabled:M.loading},[M.loading?((0,n.uX)(),(0,n.CE)("span",I,[(0,n.Lk)("span",null,(0,r.toDisplayString)(e.$t("common.loading")),1)])):((0,n.uX)(),(0,n.CE)("span",U,[(0,n.eW)((0,r.toDisplayString)(e.$t("common.login"))+" ",1),(0,n.bF)(V,{class:"icon-right"})]))],8,D)],32),(0,n.Lk)("div",R,[(0,n.Lk)("div",F,[(0,n.Lk)("span",_,(0,r.toDisplayString)(e.$t("auth.thirdPartyLogin")),1)]),(0,n.bF)(z,{config:M.configInfo},null,8,["config"]),(0,n.Lk)("div",E,[(0,n.Lk)("span",$,(0,r.toDisplayString)(e.$t("auth.noAccount")),1)]),(0,n.bF)(N,{to:"/register",class:"btn btn-secondary btn-block"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.toDisplayString)(e.$t("auth.createAccount")),1)]}),_:1})])]),(0,n.bF)(Q,{"show-popup":M.showAuthPopup,title:M.authPopupConfig.title,content:M.authPopupConfig.content,"cooldown-hours":M.authPopupConfig.cooldownHours,"close-wait-seconds":M.authPopupConfig.closeWaitSeconds,onClose:M.handleAuthPopupClose},null,8,["show-popup","title","content","cooldown-hours","close-wait-seconds","onClose"])])}],["__scopeId","data-v-0234f61d"]]),se=te}}]);